<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FunMove - Inscription aux stages</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://fonts.googleapis.com; font-src 'self' https://cdn.jsdelivr.net https://fonts.gstatic.com; img-src 'self' data:">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 sidebar">
                <div class="sidebar-sticky">
                    <div class="logo-container text-center mb-4">
                        <img src="./images/logo.png" alt="Logo FunMove" class="img-fluid">
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#accueil" data-bs-toggle="tab">
                                <i class="bi bi-house-fill"></i>
                                Accueil
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#inscriptions" data-bs-toggle="tab">
                                <i class="bi bi-person-plus-fill"></i>
                                Inscriptions
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#finance" data-bs-toggle="tab">
                                <i class="bi bi-cash-coin"></i>
                                Finances
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#presence" data-bs-toggle="tab">
                                <i class="bi bi-calendar-check"></i>
                                Présences
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#animateurs" data-bs-toggle="tab">
                                <i class="bi bi-people-fill"></i>
                                Animateurs
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#frais" data-bs-toggle="tab">
                                <i class="bi bi-receipt"></i>
                                Frais
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-md-10 ms-sm-auto px-4">
                <div class="tab-content" id="mainTabContent">
                    <!-- Section Accueil -->
                    <div class="tab-pane fade show active" id="accueil" role="tabpanel">
                        <div class="container-fluid mt-4">
                            <h2 class="section-title mb-4">Tableau de bord</h2>
                            
                            <!-- Barre de recherche globale -->
                            <div class="search-container mb-4">
                                <div class="input-group">
                                    <input type="text" class="form-control" id="searchGlobal" 
                                           placeholder="Rechercher un enfant ou un animateur...">
                                    <button class="btn btn-primary" type="button" id="searchButton">
                                        <i class="bi bi-search"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Résultats de recherche -->
                            <div id="searchResults" class="mb-4"></div>

                            <!-- Statistiques -->
                            <div class="row">
                                <!-- Carte des inscriptions -->
                                <div class="col-md-4 mb-4">
                                    <div class="card dashboard-card">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="bi bi-people-fill"></i>
                                                Inscriptions
                                            </h5>
                                            <div id="inscriptions-stats"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Carte des finances -->
                                <div class="col-md-4 mb-4">
                                    <div class="card dashboard-card">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="bi bi-cash-coin"></i>
                                                Finances
                                            </h5>
                                            <div id="finances-stats"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Carte des animateurs -->
                                <div class="col-md-4 mb-4">
                                    <div class="card dashboard-card">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="bi bi-calendar-check"></i>
                                                Prochains stages
                                            </h5>
                                            <div id="animateurs-stats"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section Inscriptions -->
                    <div class="tab-pane fade" id="inscriptions" role="tabpanel">
                        <div class="container-fluid mt-4">
                            <h2 class="section-title mb-4">Inscription d'un enfant</h2>
                            <form id="inscriptionForm" class="needs-validation" novalidate>
                                <div class="mb-3">
                                    <label for="nom" class="form-label">Nom et prénom de l'enfant</label>
                                    <input type="text" class="form-control" id="nom" required>
                                </div>

                                <div class="mb-3">
                                    <label for="dateNaissance" class="form-label">Date de naissance</label>
                                    <input type="date" class="form-control" id="dateNaissance" required>
                                </div>

                                <div class="mb-3">
                                    <label for="sexe" class="form-label">Genre</label>
                                    <select class="form-select" id="sexe" required>
                                        <option value="">Choisir...</option>
                                        <option value="Garçon">Garçon</option>
                                        <option value="Fille">Fille</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="age" class="form-label">Âge</label>
                                    <input type="number" class="form-control" id="age" required min="0">
                                </div>

                                <div class="mb-3">
                                    <label for="stage" class="form-label">Stage</label>
                                    <select class="form-select" id="stage" required>
                                        <option value="">Choisir...</option>
                                        <option value="VTT Initiation">VTT Initiation</option>
                                        <option value="VTT Perfectionnement">VTT Perfectionnement</option>
                                        <option value="Danse">Danse</option>
                                        <option value="Créativité/Culinaire">Créativité/Culinaire</option>
                                        <option value="Multisports">Multisports</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="semaine" class="form-label">Semaine</label>
                                    <select class="form-select" id="semaine" required>
                                        <option value="">Choisir...</option>
                                        <option value="Pâques S1 2025">Pâques S1 semaine du 28 avril au 2 mai 2025</option>
                                        <option value="Pâques S2 2025">Pâques S2 semaine du 5 au 9 mai 2025</option>
                                        <option value="Été S1 2025">Été S1 semaine du 7 au 11 juillet 2025</option>
                                        <option value="Été S2 2025">Été S2 semaine du 14 au 18 juillet 2025</option>
                                        <option value="Été S3 2025">Été S3 semaine du 22 au 25 juillet 2025</option>
                                        <option value="Été S4 2025">Été S4 semaine du 18 au 22 août 2025</option>
                                        <option value="Toussaint 2025">Toussaint semaine du 20 au 25 octobre 2025</option>
                                    </select>
                                </div>

                                <!-- Informations du parent 1 -->
                                <div class="mb-4">
                                    <h5>Parent 1</h5>
                                    <div class="mb-3">
                                        <label for="parents1" class="form-label">Nom et prénom</label>
                                        <input type="text" class="form-control" id="parents1" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="telephone1" class="form-label">Numéro de téléphone</label>
                                        <input type="tel" class="form-control" id="telephone1" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="email1" class="form-label">Adresse email</label>
                                        <input type="email" class="form-control" id="email1" required>
                                    </div>
                                </div>

                                <!-- Informations du parent 2 -->
                                <div class="mb-4">
                                    <h5>Parent 2</h5>
                                    <div class="mb-3">
                                        <label for="parents2" class="form-label">Nom et prénom</label>
                                        <input type="text" class="form-control" id="parents2">
                                    </div>
                                    <div class="mb-3">
                                        <label for="telephone2" class="form-label">Numéro de téléphone</label>
                                        <input type="tel" class="form-control" id="telephone2">
                                    </div>
                                    <div class="mb-3">
                                        <label for="email2" class="form-label">Adresse email</label>
                                        <input type="email" class="form-control" id="email2">
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="allergies" class="form-label">Informations médicales</label>
                                    <textarea class="form-control" id="allergies" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="montant" class="form-label">Montant du stage (€)</label>
                                    <input type="number" class="form-control" id="montant" required min="0" step="0.01">
                                </div>

                                <div class="mb-3">
                                    <label for="paiement" class="form-label">Statut du paiement</label>
                                    <select class="form-select" id="paiement" required>
                                        <option value="Non payé">Non payé</option>
                                        <option value="Payé">Payé</option>
                                        <option value="Offert">Offert</option>
                                        <option value="Liquide">Paiement en liquide</option>
                                    </select>
                                </div>

                                <button type="submit" class="btn btn-primary">Introduire l'inscription</button>
                            </form>
                        </div>
                    </div>

                    <!-- Section Finances -->
                    <div class="tab-pane fade" id="finance" role="tabpanel">
                        <div class="container-fluid mt-4">
                            <h2 class="section-title mb-4">Résumé financier</h2>
                            <ul class="nav nav-pills mb-3" id="financeStagesTabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="finance-tous-tab" data-bs-toggle="pill" href="#finance-tous" role="tab">Tous</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="finance-vtt-tab" data-bs-toggle="pill" href="#finance-vtt" role="tab">VTT</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="finance-danse-tab" data-bs-toggle="pill" href="#finance-danse" role="tab">Danse</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="finance-creativite-culinaire-tab" data-bs-toggle="pill" href="#finance-creativite-culinaire" role="tab">Créativité/Culinaire</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="finance-multisport-tab" data-bs-toggle="pill" href="#finance-multisport" role="tab">Multisports</a>
                                </li>
                            </ul>
                            <div class="stage-summary">
                                <h4 class="summary-title">
                                    Résumé financier
                                    <div class="float-end">
                                        <button type="button" class="btn btn-success me-2" onclick="exporterResumesFinanciers()">
                                            Résumé financier
                                        </button>
                                        <button type="button" class="btn btn-success" onclick="exporterResumeAnnuel()">
                                            Résumé financier annuel
                                        </button>
                                    </div>
                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div id="financialSummary"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <div id="chartContainer"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section Présences -->
                    <div class="tab-pane fade" id="presence" role="tabpanel">
                        <div class="container-fluid mt-4">
                            <h2 class="section-title mb-4">Résumé des présences</h2>
                            <div class="row">
                                <!-- Liste des inscriptions -->
                                <div class="col-12">
                                    <ul class="nav nav-pills mb-3" id="presenceStagesTabs" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="presence-tous-tab" data-bs-toggle="pill" href="#presence-tous" role="tab">Tous</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="presence-vtt-tab" data-bs-toggle="pill" href="#presence-vtt" role="tab">VTT</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="presence-danse-tab" data-bs-toggle="pill" href="#presence-danse" role="tab">Danse</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="presence-creativite-culinaire-tab" data-bs-toggle="pill" href="#presence-creativite-culinaire" role="tab">Créativité/Culinaire</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="presence-multisport-tab" data-bs-toggle="pill" href="#presence-multisport" role="tab">Multisports</a>
                                        </li>
                                    </ul>

                                    <!-- Jauges et liste des présences -->
                                    <div id="inscriptionSummary"></div>

                                    <!-- Table des inscriptions -->
                                    <div class="table-responsive mt-4">
                                        <table class="table table-striped" id="inscriptionsTable">
                                            <thead>
                                                <tr>
                                                    <th>Nom et prénom</th>
                                                    <th>Stage</th>
                                                    <th>Semaine</th>
                                                    <th>Montant</th>
                                                    <th>Paiement</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section Animateurs -->
                    <div class="tab-pane fade" id="animateurs" role="tabpanel">
                        <div class="container-fluid mt-4">
                            <h2 class="section-title mb-4">Gestion des animateurs</h2>
                            <ul class="nav nav-pills mb-3" id="animateursTabs" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="gestion-animateurs-tab" data-bs-toggle="pill" href="#gestion-animateurs" role="tab">Gestion des stages</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="profils-animateurs-tab" data-bs-toggle="pill" href="#profils-animateurs" role="tab">Profils animateurs</a>
                                </li>
                            </ul>

                            <div class="tab-content" id="animateursTabContent">
                                <!-- Onglet Gestion des stages -->
                                <div class="tab-pane fade show active" id="gestion-animateurs" role="tabpanel">
                                    <div class="row mb-4">
                                        <div class="col-12">
                                            <h4 class="summary-title">
                                                Gestion des animateurs
                                                <div class="float-end">
                                                    <button type="button" class="btn btn-success me-2" onclick="exporterListeAnimateurs()">
                                                        Liste des animateurs
                                                    </button>
                                                    <button type="button" class="btn btn-success" onclick="exporterCoutsSalariaux()">
                                                        Coûts salariaux
                                                    </button>
                                                </div>
                                            </h4>
                                            <form id="animateurForm" class="needs-validation" novalidate>
                                                <div class="row">
                                                    <div class="col-md-12 mb-3">
                                                        <label for="selectAnimateur" class="form-label">Sélectionner un animateur</label>
                                                        <select class="form-select" id="selectAnimateur" required>
                                                            <option value="">Choisir un animateur...</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <label for="roleAnimateur" class="form-label">Rôle</label>
                                                        <select class="form-select" id="roleAnimateur" required>
                                                            <option value="Animateur">Animateur principal</option>
                                                            <option value="Aide">Aide animateur</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <label for="stageAnimateur" class="form-label">Stage</label>
                                                        <select class="form-select" id="stageAnimateur" required>
                                                            <option value="">Choisir...</option>
                                                            <option value="VTT Initiation">VTT Initiation</option>
                                                            <option value="VTT Perfectionnement">VTT Perfectionnement</option>
                                                            <option value="Danse">Danse</option>
                                                            <option value="Créativité/Culinaire">Créativité/Culinaire</option>
                                                            <option value="Multisports">Multisports</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-12 mb-3">
                                                        <label for="semaineAnimateur" class="form-label">Semaine</label>
                                                        <select class="form-select" id="semaineAnimateur" required>
                                                            <option value="">Choisir...</option>
                                                            <option value="Pâques S1 2025">Pâques S1 semaine du 28 avril au 2 mai 2025</option>
                                                            <option value="Pâques S2 2025">Pâques S2 semaine du 5 au 9 mai 2025</option>
                                                            <option value="Été S1 2025">Été S1 semaine du 7 au 11 juillet 2025</option>
                                                            <option value="Été S2 2025">Été S2 semaine du 14 au 18 juillet 2025</option>
                                                            <option value="Été S3 2025">Été S3 semaine du 22 au 25 juillet 2025</option>
                                                            <option value="Été S4 2025">Été S4 semaine du 18 au 22 août 2025</option>
                                                            <option value="Toussaint 2025">Toussaint semaine du 20 au 25 octobre 2025</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <button type="submit" class="btn btn-primary">Ajouter l'animateur</button>
                                            </form>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped" id="animateursTable">
                                    <thead>
                                        <tr>
                                            <th>Nom/Prénom</th>
                                            <th>Téléphone</th>
                                            <th>Rôle</th>
                                            <th>Stage</th>
                                            <th>Semaine</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Nouvel onglet Profils animateurs -->
                    <div class="tab-pane fade" id="profils-animateurs" role="tabpanel">
                        <div class="row mb-4">
                            <div class="col-12">
                                <h4 class="summary-title">Gestion des profils animateurs</h4>
                                <form id="profilAnimateurForm" class="needs-validation" novalidate>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="nomProfilAnimateur" class="form-label">Nom</label>
                                            <input type="text" class="form-control" id="nomProfilAnimateur" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="prenomProfilAnimateur" class="form-label">Prénom</label>
                                            <input type="text" class="form-control" id="prenomProfilAnimateur" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 mb-3">
                                            <label for="adresseProfilAnimateur" class="form-label">Adresse complète</label>
                                            <input type="text" class="form-control" id="adresseProfilAnimateur" required>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="telephoneProfilAnimateur" class="form-label">Numéro de téléphone</label>
                                            <input type="tel" class="form-control" id="telephoneProfilAnimateur" required>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="compteProfilAnimateur" class="form-label">Numéro de compte IBAN</label>
                                            <input type="text" class="form-control" id="compteProfilAnimateur" required>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Créer le profil</button>
                                </form>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-striped" id="profilsAnimateursTable">
                                <thead>
                                    <tr>
                                        <th>Nom</th>
                                        <th>Prénom</th>
                                        <th>Adresse</th>
                                        <th>Téléphone</th>
                                        <th>Compte IBAN</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section Frais -->
            <div class="tab-pane fade" id="frais" role="tabpanel">
                <div class="container-fluid mt-4">
                    <h2 class="section-title mb-4">Gestion des frais</h2>
                    <div class="row mb-4">
                        <div class="col-12">
                            <form id="fraisForm" class="needs-validation" novalidate>
                                <div class="row">
                                    <div class="col-md-3 mb-3">
                                        <label for="stagefrais" class="form-label">Stage</label>
                                        <select class="form-select" id="stagefrais" required>
                                            <option value="">Choisir...</option>
                                            <option value="VTT Initiation">VTT Initiation</option>
                                            <option value="VTT Perfectionnement">VTT Perfectionnement</option>
                                            <option value="Danse">Danse</option>
                                            <option value="Créativité/Culinaire">Créativité/Culinaire</option>
                                            <option value="Multisports">Multisports</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="semainefrais" class="form-label">Semaine</label>
                                        <select class="form-select" id="semainefrais" required>
                                            <option value="">Choisir...</option>
                                            <option value="Pâques S1 2025">Pâques S1 semaine du 28 avril au 2 mai 2025</option>
                                            <option value="Pâques S2 2025">Pâques S2 semaine du 5 au 9 mai 2025</option>
                                            <option value="Été S1 2025">Été S1 semaine du 7 au 11 juillet 2025</option>
                                            <option value="Été S2 2025">Été S2 semaine du 14 au 18 juillet 2025</option>
                                            <option value="Été S3 2025">Été S3 semaine du 22 au 25 juillet 2025</option>
                                            <option value="Été S4 2025">Été S4 semaine du 18 au 22 août 2025</option>
                                            <option value="Toussaint 2025">Toussaint semaine du 20 au 25 octobre 2025</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="descriptionfrais" class="form-label">Description</label>
                                        <input type="text" class="form-control" id="descriptionfrais" required maxlength="30">
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="montantfrais" class="form-label">Montant (€)</label>
                                        <input type="number" class="form-control" id="montantfrais" required min="0" step="0.01">
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">Ajouter les frais</button>
                            </form>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped" id="fraisTable">
                            <thead>
                                <tr>
                                    <th>Stage</th>
                                    <th>Semaine</th>
                                    <th>Description</th>
                                    <th>Montant</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 